<!DOCTYPE html>
<html lang="es">

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/style.css">
<title>Compilar Rust para Linux desde macOS</title>
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Compilar Rust para Linux desde macOS | Micro IT</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Compilar Rust para Linux desde macOS" />
<meta name="author" content="xleyba" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Uno de los problemas que me he encontrado con Rust (a diferencia de lo que ocurre con Go) es la generación de un ejecutable para un OS diferente al del equipo donde se esta desarrollando." />
<meta property="og:description" content="Uno de los problemas que me he encontrado con Rust (a diferencia de lo que ocurre con Go) es la generación de un ejecutable para un OS diferente al del equipo donde se esta desarrollando." />
<link rel="canonical" href="http://localhost:4000/2019/04/10/compilar-rust-para-Linux-desde-macOS.html" />
<meta property="og:url" content="http://localhost:4000/2019/04/10/compilar-rust-para-Linux-desde-macOS.html" />
<meta property="og:site_name" content="Micro IT" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-10T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Compilar Rust para Linux desde macOS" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2019/04/10/compilar-rust-para-Linux-desde-macOS.html","author":{"@type":"Person","name":"xleyba"},"headline":"Compilar Rust para Linux desde macOS","dateModified":"2019-04-10T00:00:00+02:00","datePublished":"2019-04-10T00:00:00+02:00","description":"Uno de los problemas que me he encontrado con Rust (a diferencia de lo que ocurre con Go) es la generación de un ejecutable para un OS diferente al del equipo donde se esta desarrollando.","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/04/10/compilar-rust-para-Linux-desde-macOS.html"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


<script type="text/javascript" src="/assets/js/darkmode.js"></script>

</head><body>
  <main class="container">
    <section class="about">
      <div class="about-header condensed">
      <div class="about-title">
      <a href="/">
        
        <img src="/assets/portfolio.png" alt="Javier Leyba" />
        
      </a>
      <h2 id="title">
        <a href="/">Javier Leyba</a>
      </h2>
      </div><p class="tagline">Solutions Architect</p></div>
      
      <ul class="social about-footer condensed"><a href="https://github.com/xleyba" target="_blank">
          <li>
            <i class="icon-github-circled"></i>
          </li>
        </a><a href="https://www.linkedin.com/in/javier-leyba" target="_blank">
          <li>
            <i class="icon-linkedin-squared"></i>
          </li>
        </a><a href="https://twitter.com/javier_leyba" target="_blank">
          <li>
            <i class="icon-twitter-squared"></i>
          </li>
        </a><a href="https://instagram.com/javier.leyba.photo" target="_blank">
          <li>
            <i class="icon-instagram"></i>
          </li>
        </a></ul><p class="about-footer condensed">&copy;
        2022</p><div class="about-footer condensed">
        <p>Dark Mode
          <i class="icon-moon"></i>
          <label class="switch">
            <input type="checkbox" class="dark-mode-toggle">
            <span class="slider round" onclick="toggleDarkMode()"></span>
          </label>
        </p>
      </div>
    </section>
    <section class="content">
      <div class="post-container">
  <a class="post-link" href="/2019/04/10/compilar-rust-para-Linux-desde-macOS.html">
    <h2 class="post-title">Compilar Rust para Linux desde macOS</h2>
  </a>
  <div class="post-meta">
    <div class="post-date"><i class="icon-calendar"></i>Apr 10, 2019</div></div>
  <div class="post">
    <p>Uno de los problemas que me he encontrado con Rust (a diferencia de lo que ocurre con Go) es la generación de un ejecutable para un OS diferente al del equipo donde se esta desarrollando.</p>

<p>Recopilando información de varias fuentes he logrado hacerlo así:</p>

<!--end_excerpt-->
<h2 id="paso-1">Paso 1</h2>

<p>En la carpeta del proyecto crear dir .cargo</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> .cargo
</code></pre></div></div>

<h2 id="paso-2">Paso 2</h2>

<p>Crear un fichero config en .cargo y agregarlo datos para el linker que corresponda al target elegido.</p>

<div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[target.x86_64-unknown-linux-musl]</span>
<span class="py">linker</span> <span class="p">=</span> <span class="s">"x86_64-linux-musl-gcc"</span>
</code></pre></div></div>

<p>Luego, si miramos en la estructura de nuestro proyecto, veremos que en target nos faltan los archivos del que queremos generar. Por eso, debemos agregar dicho target para permitir la compilación.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rustup target add x86_64-unknown-linux-musl
</code></pre></div></div>

<p>Para este target deberemos instalar su linker</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>filosottile/musl-cross/musl-cross
</code></pre></div></div>

<p>Luego ya estamos listos para generar la aplicación aunque hay que pasar una variable de entorno para que el proceso pueda encontrar el linker (al menos en macOS)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">CROSS_COMPILE</span><span class="o">=</span>x86_64-linux-musl cargo build <span class="nt">--release</span> <span class="nt">--target</span><span class="o">=</span>x86_64-unknown-linux-musl
</code></pre></div></div>

<p>Cuando termine el proceso, encontraremos nuestro ejecutable en:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>target
  └── x86_64-unknown-linux-musl
                               └── release
</code></pre></div></div>

<p>Y listo. 🙂</p>

  </div></div>

    </section>
    <footer class="condensed">
      <ul class="social about-footer condensed"><a href="https://github.com/xleyba" target="_blank">
          <li>
            <i class="icon-github-circled"></i>
          </li>
        </a><a href="https://www.linkedin.com/in/javier-leyba" target="_blank">
          <li>
            <i class="icon-linkedin-squared"></i>
          </li>
        </a><a href="https://twitter.com/javier_leyba" target="_blank">
          <li>
            <i class="icon-twitter-squared"></i>
          </li>
        </a><a href="https://instagram.com/javier.leyba.photo" target="_blank">
          <li>
            <i class="icon-instagram"></i>
          </li>
        </a></ul><p class="about-footer condensed">&copy;
        2022</p><div class="about-footer condensed">
        <p>Dark Mode
          <i class="icon-moon"></i>
          <label class="switch">
            <input type="checkbox" class="dark-mode-toggle">
            <span class="slider round" onclick="toggleDarkMode()"></span>
          </label>
        </p>
      </div>
    </footer>
  </main>
  
  <script type="text/javascript" src="/assets/js/darkmode.js"></script>
  
  <script src="/assets/js/simple-jekyll-search.min.js"></script>
  <script src="/assets/js/search.js"></script>
  
</body>

</html>
